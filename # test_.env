# test_.env

import os
from dotenv import load_dotenv

def test_env_variables_exist_and_not_empty():
    # Load .env file from project root
    env_path = os.path.join(os.path.dirname(__file__), '.env')
    assert os.path.exists(env_path), ".env file does not exist"
    load_dotenv(env_path)

    required_vars = [
        "POLYGON_MAINNET_RPC_URL",
        "CONTRACT_ADDRESS",
        "ACCOUNT_ADDRESS",
        "ESCROW_PRIVATE_KEY",
        "ESCROW_ADDRESS",
        "ADMIN_ADDRESS",
        "OPENAI_API_KEY",
        "OPENAI_ASSISTANT_ID"
    ]

    for var in required_vars:
        value = os.getenv(var)
        assert value is not None, f"{var} is missing in .env"
        assert value.strip() != "", f"{var} is empty in .env"