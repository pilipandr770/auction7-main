{% extends "base.html" %}
{% block title %}{{ ui_text('buyer_dashboard_title', lang) }}{% endblock %}
{% block content %}
<div class="container my-5">
    <div class="text-center mb-4">
        <h1 class="text-secondary">{{ ui_text('buyer_dashboard_header', lang) }}</h1>
        <p class="text-muted">{{ ui_text('buyer_dashboard_username', lang) }}: <strong>{{ user.username }}</strong></p>
        <p>{{ ui_text('buyer_dashboard_balance', lang) }}: <strong><span id="balance-display">{{ user.balance }}</span> UAH</strong></p>
    </div>
    {% if pending_confirmations %}
    <div class="alert alert-warning mb-4">
        <b>{{ ui_text('buyer_dashboard_pending_confirmations_header', lang) }}</b>
        <ul>
            {% for auction in pending_confirmations %}
            <li>
                <b>{{ auction.title }}</b> â€”
                <form method="POST" action="{{ url_for('user.confirm_receive', auction_id=auction.id) }}" style="display:inline;">
                    <button type="submit" class="btn btn-success btn-sm">{{ ui_text('buyer_dashboard_confirm_receive', lang) }}</button>
                </form>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    <div class="alert alert-info mb-4">
        <b>{{ ui_text('buyer_dashboard_crypto_info_header', lang) }}</b> {{ ui_text('buyer_dashboard_crypto_info_body', lang) }}
    </div>
    <div class="card shadow-sm border-0 mb-5">
        <div class="card-body">
            <h3 class="card-title text-primary">{{ ui_text('buyer_dashboard_auction_tips_header', lang) }}</h3>
            <h5>ðŸŽ¯ {{ ui_text('buyer_dashboard_fair_price', lang) }}</h5>
            <p>{{ ui_text('buyer_dashboard_fair_price_description', lang) }}</p>
            <h5>ðŸšª {{ ui_text('buyer_dashboard_entry_price', lang) }}</h5>
            <p>{{ ui_text('buyer_dashboard_entry_price_description', lang) }}</p>
            <h5>ðŸ’¡ {{ ui_text('buyer_dashboard_buyer_advantages', lang) }}</h5>
            <p>{{ ui_text('buyer_dashboard_buyer_advantages_description', lang) }}</p>
            <h5>âš¡ {{ ui_text('buyer_dashboard_risks_responsibility', lang) }}</h5>
            <p>{{ ui_text('buyer_dashboard_risks_responsibility_description', lang) }}</p>
            <h5>ðŸŽ¯ {{ ui_text('buyer_dashboard_experienced_buyer_strategy', lang) }}</h5>
            <p>{{ ui_text('buyer_dashboard_experienced_buyer_strategy_description', lang) }}</p>
            <h5>ðŸ“Œ {{ ui_text('buyer_dashboard_summary', lang) }}</h5>
            <ul>
                <li>{{ ui_text('buyer_dashboard_choose_auction_carefully', lang) }}</li>
                <li>{{ ui_text('buyer_dashboard_participate_consciously', lang) }}</li>
                <li>{{ ui_text('buyer_dashboard_consider_all_opportunities', lang) }}</li>
                <li>{{ ui_text('buyer_dashboard_be_patient', lang) }}</li>
            </ul>
            <p><strong>{{ ui_text('buyer_dashboard_transparency_commitment', lang) }}</strong></p>
        </div>
    </div>
    <div class="card shadow-sm border-0 mb-5">
        <div class="card-body">
            <h3 class="card-title text-secondary">{{ ui_text('buyer_dashboard_available_auctions', lang) }}</h3>
            {% if auctions %}
            <div class="row">
                {% for auction in auctions %}
                <div class="col-md-4 d-flex align-items-stretch">
                    {% set img_url = auction.photos[0] if auction.photos and auction.photos[0] else 'images/default.jpg' %}
                    {% include 'auctions/auction_card_de.html' with context %}
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p class="text-muted text-center">{{ ui_text('buyer_dashboard_no_auctions', lang) }}</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
