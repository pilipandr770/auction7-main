{% extends "base.html" %}

{% block title %}KÃ¤ufer-Dashboard{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="text-center mb-4">
        <h1 class="text-secondary">KÃ¤ufer-Dashboard</h1>
        <p class="text-muted">Benutzername: <strong>{{ user.username }}</strong></p>
        <p>Kontostand: <strong><span id="balance-display">{{ user.balance }}</span> EUR</strong></p>
    </div>

    <!-- Erinnerung zur BestÃ¤tigung des Warenerhalts -->
    {% if pending_confirmations %}
    <div class="alert alert-warning mb-4">
        <b>Auktionen, die auf BestÃ¤tigung des Erhalts warten</b>
        <ul>
            {% for auction in pending_confirmations %}
            <li>
                <b>{{ auction.title }}</b> â€”
                <form method="POST" action="{{ url_for('user.confirm_receive', auction_id=auction.id) }}" style="display:inline;">
                    <button type="submit" class="btn btn-success btn-sm">Erhalt bestÃ¤tigen</button>
                </form>
                <!-- VerkÃ¤uferkontakt -->
                <div class="mt-2 ps-2">
                    <strong>Kontaktdaten des VerkÃ¤ufers:</strong><br>
                    <span>Name: {{ auction.seller.username }}</span><br>
                    <span>E-Mail: {{ auction.seller.email }}</span><br>
                    {% if auction.seller.phone %}
                        <span>Telefon: {{ auction.seller.phone }}</span>
                    {% endif %}
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <!-- Info Ã¼ber Krypto-Funktionen -->
    <div class="alert alert-info mb-4">
        <b>Krypto-Funktionen:</b> Sie kÃ¶nnen Ihre Wallet verbinden, um an Token-Auktionen teilzunehmen und Rabatte zu erhalten.
    </div>

    <!-- Wie man vorteilhaft und verantwortungsvoll teilnimmt -->
    <div class="card shadow-sm border-0 mb-5">
        <div class="card-body">
            <h3 class="card-title text-primary">Wie Sie bei Auktionen profitieren</h3>

            <h5>ğŸ¯ Fairer Preis</h5>
            <p>Sie kÃ¶nnen einen Artikel zu einem durch die AktivitÃ¤t der Teilnehmer bestimmten Preis gewinnen.</p>

            <h5>ğŸšª TeilnahmegebÃ¼hr</h5>
            <p>Um an einer Auktion teilzunehmen, zahlen Sie nur eine geringe GebÃ¼hr (1% des Startpreises).</p>

            <h5>ğŸ’¡ Vorteile fÃ¼r KÃ¤ufer</h5>
            <p>Die MÃ¶glichkeit, mit Rabatt zu gewinnen, Transparenz im Prozess, UnterstÃ¼tzung durch KI-Assistenten.</p>

            <h5>âš¡ Risiken und Verantwortung</h5>
            <p>Die Teilnahme ist immer mit einem Risiko verbunden. Handeln Sie verantwortungsvoll und schÃ¤tzen Sie Ihre MÃ¶glichkeiten realistisch ein.</p>

            <h5>ğŸ¯ Strategie eines erfahrenen KÃ¤ufers</h5>
            <p>Analysieren Sie die Auktionsdynamik, Ã¼berstÃ¼rzen Sie keine Entscheidungen, nutzen Sie alle verfÃ¼gbaren Werkzeuge.</p>

            <h5>ğŸ“Œ Zusammenfassung</h5>
            <ul>
                <li>WÃ¤hlen Sie Auktionen sorgfÃ¤ltig aus</li>
                <li>Nehmen Sie verantwortungsvoll teil</li>
                <li>BerÃ¼cksichtigen Sie alle MÃ¶glichkeiten</li>
                <li>Seien Sie geduldig</li>
            </ul>
            <p><strong>Wir garantieren Transparenz und Fairness bei jeder Auktion!</strong></p>
        </div>
    </div>

    <!-- Liste der verfÃ¼gbaren Auktionen -->
    <div class="card shadow-sm border-0 mb-5">
        <div class="card-body">
            <h3 class="card-title text-secondary">VerfÃ¼gbare Auktionen</h3>
            {% if auctions %}
            <div class="row">
                {% for auction in auctions %}
                <div class="col-md-4 d-flex align-items-stretch">
                    {% set img_url = auction.photos[0] if auction.photos and auction.photos[0] else 'images/default.jpg' %}
                    {% include 'auctions/auction_card.html' with context %}
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p class="text-muted text-center">Keine verfÃ¼gbaren Auktionen.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
